{"version":3,"sources":["./src/app/tab1/tab1.page.html","./src/app/tab1/tab1.page.ts","./src/app/tab1/tab1-routing.module.ts","./src/app/tab1/services/lights.service.ts","./src/app/tab1/tab1.page.scss","./src/app/tab1/tab1.module.ts"],"names":[],"mappings":"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","file":"tab1-tab1-module.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-title>\\n      Luces\\n    </ion-title>\\n    <ion-button [routerLink]=\\\"['/dashboard']\\\">\\n      Dashboard\\n    </ion-button>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\" style=\\\"display: flex; justify-content: center;\\\">\\n  <ion-row>\\n    <ion-col>\\n      <button class=\\\"btn btn-primary\\\" (click)=\\\"getData()\\\">Actualizar  </button>\\n    </ion-col>\\n  </ion-row>\\n  <ion-card *ngIf=\\\"ultimasdiez?.length > 0\\\">\\n    <ion-card-header>\\n      \\n      Censado luz {{ambiente}}\\n      \\n    </ion-card-header>\\n\\n \\n    <ion-item *ngFor=\\\"let luz of ultimasdiez\\\">\\n      <ion-label>Censado luz interior</ion-label>\\n  \\n         <ng-container  *ngIf=\\\"luz.value == '1' \\\"> \\n          <ion-item>\\n            <ion-label>Luces encendida</ion-label>\\n            <ion-toggle  (ionChange)=\\\"toggleLight(luz)\\\" checked=\\\"true\\\"></ion-toggle>\\n          </ion-item>\\n         </ng-container>\\n         <ng-container  *ngIf=\\\"luz.value == '0' \\\"> \\n          <ion-item>\\n            <ion-label>Luces apagada</ion-label>\\n            <ion-toggle   (ionChange)=\\\"toggleLight(luz)\\\"checked=\\\"false\\\"></ion-toggle>\\n          </ion-item>\\n         </ng-container>\\n         <ion-badge color=\\\"secondary\\\" >{{luz.datetime}}</ion-badge> \\n\\n    </ion-item>\\n  </ion-card>\\n \\n  <ion-row>\\n    <ion-col *ngIf=\\\"show == true\\\">\\n      <ion-chip color=\\\"secondary\\\">\\n        <ion-label color=\\\"warning\\\">No se encontraron datos!</ion-label>\\n      </ion-chip>\\n    </ion-col>\\n  </ion-row>\\n\\n\\n\\n\\n</ion-content>\\n\";","import { Component, OnChanges, OnInit, SimpleChanges } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { TestService } from '../test.service';\nimport { LightsService } from './services/lights.service';\n\n\nexport interface Coleccion {\n  datetime: string;\n  status: number;\n  topic: string;\n  value: string;\n}\n\n@Component({\n  selector: 'app-tab1',\n  templateUrl: 'tab1.page.html',\n  styleUrls: ['tab1.page.scss']\n})\n\n\nexport class Tab1Page implements OnInit ,OnChanges  {\n  \n  ultimasdiez \n  ambiente = \"\"\n  show = false\n  constructor(private testService : TestService, private lightService : LightsService) {}\n\n\n  ngOnChanges(changes: SimpleChanges): void {\n    console.log(\"prueba change\")\n    throw new Error('Method not implemented.');\n  }\n  ngOnInit(): void {\n    this.ambiente = localStorage.getItem('ambienteseleccionado');\n    console.log(\"el ambiente seleccionado es : \" + this.ambiente)\n    this.getData()\n  }\n\n\n  getData(){\n   \n    this.ambiente = localStorage.getItem('ambienteseleccionado');\n      \n      this.lightService.getLight(this.ambiente).subscribe(\n        res => {\n          this.ultimasdiez = res\n          this.show = false\n          console.log(this.ultimasdiez)\n        },\n        error => {\n          this.show = true\n          console.log(error)\n        }\n      )\n \n\n  }\n  toggleLight(luz){\n      this.lightService.toggleLight(!luz.status, 1).subscribe(\n        res => {\n          luz.status = !luz.status\n          console.log(res)\n        },\n        error => {\n          console.log(error)\n        }\n      )\n\n  }\n\n  \n  getData2(){\n    return '[{\"datetime\":\"29/05/2021 23:26:29\",\"status\":1,\"topic\":\"/casa/interior/actuadores/luces\",\"value\":\"0\"},{\"datetime\":\"29/05/2021 23:25:29\",\"status\":1,\"topic\":\"/casa/interior/actuadores/luces\",\"value\":\"0\"},{\"datetime\":\"29/05/2021 23:24:29\",\"status\":1,\"topic\":\"/casa/interior/actuadores/luces\",\"value\":\"0\"},{\"datetime\":\"29/05/2021 23:23:55\",\"status\":1,\"topic\":\"/casa/interior/actuadores/luces\",\"value\":\"1\"},{\"datetime\":\"29/05/2021 23:23:54\",\"status\":1,\"topic\":\"/casa/interior/actuadores/luces\",\"value\":\"0\"},{\"datetime\":\"29/05/2021 23:23:53\",\"status\":1,\"topic\":\"/casa/interior/actuadores/luces\",\"value\":\"0\"},{\"datetime\":\"29/05/2021 23:23:52\",\"status\":1,\"topic\":\"/casa/interior/actuadores/luces\",\"value\":\"1\"},{\"datetime\":\"29/05/2021 23:23:51\",\"status\":1,\"topic\":\"/casa/interior/actuadores/luces\",\"value\":\"0\"},{\"datetime\":\"29/05/2021 23:23:50\",\"status\":1,\"topic\":\"/casa/interior/actuadores/luces\",\"value\":\"0\"},{\"datetime\":\"29/05/2021 23:23:49\",\"status\":1,\"topic\":\"/casa/interior/actuadores/luces\",\"value\":\"1\"}]';\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab1Page } from './tab1.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab1Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab1PageRoutingModule {}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LightsService {\n\n  constructor(private http : HttpClient) {\n  }\n  \n  toggleLight(value : boolean, ambiente: number){\n    return this.http.post('https://ws.nerdingland.com/luz',{\"ambiente\": ambiente, \"value\": value});\n\n   }\n   getLight(ambiente){\n    return this.http.get('https://ws.nerdingland.com/?collectionName=casa/interior/'+ambiente+'/luz');\n\n   }\n\n\n}\n","export default \"ion-toggle {\\n  --background: #000;\\n  --background-checked: #00ff55;\\n  --handle-background: #ff0000;\\n  --handle-background-checked: rgb(182, 182, 184);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXHRhYjEucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQUE7RUFDQSw2QkFBQTtFQUVBLDRCQUFBO0VBQ0EsK0NBQUE7QUFBSiIsImZpbGUiOiJ0YWIxLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi10b2dnbGUge1xuICAgIC0tYmFja2dyb3VuZDogIzAwMDtcbiAgICAtLWJhY2tncm91bmQtY2hlY2tlZDogIzAwZmY1NTtcbiAgXG4gICAgLS1oYW5kbGUtYmFja2dyb3VuZDogI2ZmMDAwMDtcbiAgICAtLWhhbmRsZS1iYWNrZ3JvdW5kLWNoZWNrZWQ6IHJnYigxODIsIDE4MiwgMTg0KTtcbiAgfVxuICAiXX0= */\";","import { IonicModule } from '@ionic/angular';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\n\nimport { Tab1PageRoutingModule } from './tab1-routing.module';\nimport { Tab1Page } from './tab1.page';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ExploreContainerComponentModule,\n    Tab1PageRoutingModule\n  ],\n  declarations: [Tab1Page]\n})\nexport class Tab1PageModule {}\n"],"sourceRoot":"webpack:///"}